<!DOCTYPE html>
<html lang="en">
    <head>
        <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" />
        <meta http-equiv="Content-Type" content="text/html;charset=UTF-8" />
        <title>Info Evaluation Test</title>
        <link rel="icon" href="icon.png" />
        <link rel="apple-touch-icon" href="icon.png" />
        <link rel="stylesheet" href="style.css" />
        <script src="transformer.js"></script>
    </head>
    <body>
        <div id="noQuiz" style="display: none;">
            <img src="icon.png" alt="We Logo" />
            <p class="unavailable">The next quiz will be published soon.</p>
        </div>
        <div id="loginDiv" style="display: block;" class="protected">
            <div class="protected__alert" id="alert">Username or Password Is Incorrect</div>
            <div class="protected__content">
                <h1 class="protected__content__heading">Login to continue</h1>
                <input class="protected__content__input" id="agent" type="text" placeholder="username" onkeypress="PressEnterToLogin()" />
                <input class="protected__content__input" id="password" type="password" placeholder="password" onkeypress="PressEnterToLogin()" />
                <button onclick="Login()" id="button" type="button" class="protected__content__btn">Login</button>
            </div>
        </div>
        <div id="mainDiv" style="display: none;">
            <div id="Header">
                <br />
                <h1>Info Evaluation Test</h1>
                <p class="month">April 2023</p>
            </div>
            <form method="post" name="Attendance" id="Attendance">
                <input type="text" name="Attend" id="Attend" style="display: none;" />
                <input type="text" name="Attend-Time" id="AttendTime" style="display: none;" />
            </form>
            <form method="post" name="InfoEvaluation" id="InfoEvaluation">
                <div class="tab" id="StartDiv" style="display: block;">
                    <img src="icon.png" alt="We Logo" />
                    <p class="welcome" id="Welcome"><br /></p>
                    <input type="text" name="Submission-Time" id="SubmissionTime" style="display: none;" />
                    <input type="text" name="Agent-Name" id="AgentName" style="display: none;" />
                    <input type="text" name="Area-Manager" id="AreaManager" style="display: none;" />
                    <input type="text" name="Store-Name" id="StoreName" style="display: none;" />
                    <input type="text" name="Quiz-Result" id="QuizResult" style="display: none;" />
                </div>
                <p class="notifications" id="Notifications" style="display: none;"></p>
                <p class="timer" id="Timer" style="display: none;">( 10:00 )</p>
                <div id="TheQuiz" style="display: block;">
                    <div id="Tab1" class="tab">
                        <br />
                        <p>1. In the Prepare for the Green offer to replace the old SIM, where the consumer is allowed to get 300 MG, valid for 5 days.</p>
                        <input name="Q-1" type="radio" value="A" />
                        <label>True</label><br />
                        <input name="Q-1" type="radio" value="B" />
                        <label>False</label><br />
                        <br />
                        <br />
                    </div>
                    <div id="Tab2" class="tab">
                        <br />
                        <p>2. In the world cup offer CST can Recharge and get 60x his recharge units valid for 5 days.</p>
                        <input name="Q-2" type="radio" value="A" />
                        <label>True</label><br />
                        <input name="Q-2" type="radio" value="B" />
                        <label>False</label><br />
                        <br />
                        <br />
                    </div>
                    <div id="Tab3" class="tab">
                        <br />
                        <p>3. Priority when adding an additional internet package to we space tariff is for ... .</p>
                        <input name="Q-3" type="radio" value="A" />
                        <label>Basic package</label><br />
                        <input name="Q-3" type="radio" value="B" />
                        <label>Extra package</label><br />
                        <input name="Q-3" type="radio" value="C" />
                        <label>Closest to finish</label>
                        <br />
                        <br />
                    </div>
                    <div id="Tab4" class="tab">
                        <br />
                        <p>4. A commercial land line can be contracted through our franchise stores.</p>
                        <input name="Q-4" type="radio" value="A" />
                        <label>True</label><br />
                        <input name="Q-4" type="radio" value="B" />
                        <label>False</label><br />
                        <br />
                        <br />
                    </div>
                    <div id="Tab5" class="tab">
                        <br />
                        <p>5. CST can subscribe to the voice mail service through the code ... .</p>
                        <input name="Q-5" type="radio" value="A" />
                        <label>*505#</label><br />
                        <input name="Q-5" type="radio" value="B" />
                        <label>*515#</label><br />
                        <input name="Q-5" type="radio" value="C" />
                        <label>*550#</label>
                        <br />
                        <br />
                    </div>
                    <div id="Tab6" class="tab">
                        <br />
                        <p>6. When CST transfers any amount from the WE Pay wallet to any other electronic wallet and it is the expenses of the first transaction.</p>
                        <input name="Q-6" type="radio" value="A" />
                        <label>1% min. 5 EGP</label><br />
                        <input name="Q-6" type="radio" value="B" />
                        <label>5% min. 5 EGP</label><br />
                        <input name="Q-6" type="radio" value="C" />
                        <label>For free</label><br />
                        <br />
                        <br />
                    </div>
                    <div id="Tab7" class="tab">
                        <br />
                        <p>7. Itâ€™s Back to School Season! when CST recharge WE Space top-up bundle & get X2 your GBs for the same price as he will subscribe in ... to enjoy with ... .</p>
                        <input name="Q-7" type="radio" value="A" />
                        <label>50 top-up & 100 GBs</label><br />
                        <input name="Q-7" type="radio" value="B" />
                        <label>100 top-up & 200 GBs</label><br />
                        <input name="Q-7" type="radio" value="C" />
                        <label>200 top-up & 400 GBs</label><br />
                        <br />
                        <br />
                    </div>
                    <div id="Tab8" class="tab">
                        <br />
                        <p>8. We can activate foreign CST lines through the call center only.</p>
                        <input name="Q-8" type="radio" value="A" />
                        <label>True</label><br />
                        <input name="Q-8" type="radio" value="B" />
                        <label>False</label><br />
                        <br />
                        <br />
                    </div>
                    <div id="Tab9" class="tab">
                        <br />
                        <p>9. In New Control Tazbeet tariff the price of a minute outside the package is ... .</p>
                        <input name="Q-9" type="radio" value="A" />
                        <label>19 PT</label><br />
                        <input name="Q-9" type="radio" value="B" />
                        <label>15 PT</label><br />
                        <input name="Q-9" type="radio" value="C" />
                        <label>12 PT</label>
                        <br />
                        <br />
                    </div>
                    <div id="Tab10" class="tab">
                        <br />
                        <p>10. All WE customers can get 500 minutes to each Ahlawy community with a monthly subscription of 5 EGP through code ... .</p>
                        <input name="Q-10" type="radio" value="A" />
                        <label>*610#</label><br />
                        <input name="Q-10" type="radio" value="B" />
                        <label>*601#</label><br />
                        <input name="Q-10" type="radio" value="C" />
                        <label>*617#</label><br />
                        <br />
                        <br />
                    </div>
                    <input style="display: none;" id="submit" type="submit" value="Submit" />
                    <br />
                    <br />
                    <br />
                    <div id="BtnRow" style="overflow: auto;">
                        <button type="button" id="nextBtn" onclick="nextPrev(1)">Next</button>
                        <button type="button" id="prevBtn" onclick="nextPrev(-1)">Previous</button>
                    </div>
                </div>
                <div id="Loading" style="display: none;" class="loader"></div>
            </form>
            <br />
            <br />
        </div>
        <script>
            var day = new Date().getDate();
            if (day == 8 || day == 9 || day == 10) {
                Check();
            } else {
                noQuiz.style.display = "block";
                loginDiv.style.display = "none";
            }
            function Check() {
                if (sessionStorage.getItem("agent") !== null) {
                    loginDiv.style.display = "none";
                    mainDiv.style.display = "block";
                    WelcomeAgent();
                } else {
                    document.getElementById("agent").focus();
                }
            }
            function WelcomeAgent() {
                document.getElementById("Welcome").innerHTML = "Welcome " + sessionStorage.getItem("agent") + ", This quiz consists of 10 questions, with 30 minutes time frame, only one attempt available.";
                document.getElementById("AgentName").value = sessionStorage.getItem("agent");
                document.getElementById("AreaManager").value = sessionStorage.getItem("area");
                document.getElementById("StoreName").value = sessionStorage.getItem("store");
                document.getElementById("Attend").value = sessionStorage.getItem("agent");
            }
            document.getElementById("InfoEvaluation").onkeypress = function (e) {
                var key = e.charCode || e.keyCode || 0;
                if (key == 13) {
                    e.preventDefault();
                }
            };
            const attendanceScriptURL = "https://script.google.com/macros/s/AKfycbzp1E8AlLFVpX1ld217M4kIPadfXQg4Jy5DMtKlIIWIHB2X7EjFqgGNDQsvT5a6N5ePeg/exec?sheetName=Attendance";
            const attendanceForm = document.forms["Attendance"];
            const scriptURL = "https://script.google.com/macros/s/AKfycbzp1E8AlLFVpX1ld217M4kIPadfXQg4Jy5DMtKlIIWIHB2X7EjFqgGNDQsvT5a6N5ePeg/exec?sheetName=Evaluation";
            const form = document.forms["InfoEvaluation"];
            form.addEventListener("submit", (e) => {
                clearInterval(interval);
                GetQuizResult();
                document.getElementById("submit").disabled = true;
                Header.style.display = "none";
                BtnRow.style.display = "none";
                Timer.style.display = "none";
                Loading.style.display = "block";
                e.preventDefault();
                document.getElementById("SubmissionTime").value = new Date().toLocaleString();
                fetch(scriptURL, { method: "POST", body: new FormData(form) })
                    .then((response) => QuizSubmitted())
                    .catch((error) => SubmitError());
            });
            function Start() {
                var countDownDate = new Date().getTime() + 601000;
                var x = setInterval(function () {
                    var now = new Date().getTime();
                    var distance = countDownDate - now;
                    var minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
                    var seconds = Math.floor((distance % (1000 * 60)) / 1000);
                    if (minutes < 10) {
                        minutes = "0" + minutes;
                    }
                    if (seconds < 10) {
                        seconds = "0" + seconds;
                    }
                    document.getElementById("Timer").innerHTML = "( " + minutes + ":" + seconds + " )";
                    if (distance < 0) {
                        clearInterval(x);
                        GetQuizResult();
                        document.getElementById("Timer").innerHTML = "( 00:00 )";
                        document.getElementById("Timer").style.webkitFilter = "opacity(0.5)";
                        document.getElementById("TheQuiz").style.webkitFilter = "opacity(0.5)";
                        Loading.style.display = "block";
                        document.getElementById("SubmissionTime").value = new Date().toLocaleString();
                        fetch(scriptURL, { method: "POST", body: new FormData(form) })
                            .then((response) => TimeOutSubmitted())
                            .catch((error) => SubmitError());
                    }
                }, 1000);
                window.interval = x;
                sessionStorage.removeItem("agent");
            }
            var currentTab = 0;
            showTab(currentTab);
            function showTab(n) {
                var x = document.getElementsByClassName("tab");
                x[n].style.display = "block";
                if (n == 0) {
                    document.getElementById("prevBtn").style.display = "none";
                    Timer.style.display = "none";
                    document.getElementById("nextBtn").innerHTML = "Start";
                    document.getElementById("nextBtn").style.width = "280px";
                } else if (n == 1 && Timer.style.display == "none") {
                    document.getElementById("mainDiv").style.width = "inherit";
                    document.getElementById("nextBtn").innerHTML = "Next";
                    Timer.style.display = "block";
                    Start();
                    document.getElementById("nextBtn").style.width = "70px";
                } else if (n == 1) {
                    document.getElementById("mainDiv").style.width = "inherit";
                    document.getElementById("prevBtn").style.display = "none";
                    document.getElementById("nextBtn").innerHTML = "Next";
                    document.getElementById("nextBtn").style.width = "70px";
                } else if (n == x.length - 1) {
                    document.getElementById("mainDiv").style.width = "inherit";
                    document.getElementById("nextBtn").innerHTML = "Submit";
                    document.getElementById("nextBtn").style.width = "70px";
                } else {
                    document.getElementById("mainDiv").style.width = "inherit";
                    document.getElementById("prevBtn").style.display = "inline";
                    document.getElementById("nextBtn").innerHTML = "Next";
                    document.getElementById("nextBtn").style.width = "70px";
                }
            }
            function nextPrev(n) {
                if (
                    (n == 1 && currentTab == 1 && document.querySelector('input[name="Q-1"]:checked') == null) ||
                    (n == 1 && currentTab == 2 && document.querySelector('input[name="Q-2"]:checked') == null) ||
                    (n == 1 && currentTab == 3 && document.querySelector('input[name="Q-3"]:checked') == null) ||
                    (n == 1 && currentTab == 4 && document.querySelector('input[name="Q-4"]:checked') == null) ||
                    (n == 1 && currentTab == 5 && document.querySelector('input[name="Q-5"]:checked') == null) ||
                    (n == 1 && currentTab == 6 && document.querySelector('input[name="Q-6"]:checked') == null) ||
                    (n == 1 && currentTab == 7 && document.querySelector('input[name="Q-7"]:checked') == null) ||
                    (n == 1 && currentTab == 8 && document.querySelector('input[name="Q-8"]:checked') == null) ||
                    (n == 1 && currentTab == 9 && document.querySelector('input[name="Q-9"]:checked') == null) ||
                    (n == 1 && currentTab == 10 && document.querySelector('input[name="Q-10"]:checked') == null)
                ) {
                    alert("You must answer all questions!");
                    return false;
                }
                var x = document.getElementsByClassName("tab");
                x[currentTab].style.display = "none";
                currentTab = currentTab + n;
                if (currentTab >= x.length) {
                    document.getElementById("submit").click();
                    return false;
                }
                if (currentTab == 1 && Timer.style.display == "none") {
                    let text = "You can access this quiz one-time only, are you ready now?";
                    if (confirm(text) == true) {
                        currentTab = currentTab - n;
                        showTab(currentTab);
                        document.getElementById("StartDiv").style.webkitFilter = "opacity(0.5)";
                        document.getElementById("TheQuiz").style.webkitFilter = "opacity(0.5)";
                        Loading.style.display = "block";
                        document.getElementById("AttendTime").value = new Date().toLocaleString();
                        fetch(attendanceScriptURL, { method: "POST", body: new FormData(attendanceForm) })
                            .then((response) => StartQuiz(n))
                            .catch((error) => StartQuizError());
                    } else {
                        currentTab = currentTab - n;
                        showTab(currentTab);
                        return false;
                    }
                }
                showTab(currentTab);
                NextTransform();
            }
            function StartQuiz(n) {
                Loading.style.display = "none";
                Header.style.display = "none";
                document.getElementById("StartDiv").style.webkitFilter = "none";
                document.getElementById("TheQuiz").style.webkitFilter = "none";
                var x = document.getElementsByClassName("tab");
                x[currentTab].style.display = "none";
                currentTab = currentTab + n;
                showTab(currentTab);
            }
            function StartQuizError() {
                Loading.style.display = "none";
                Header.style.display = "none";
                StartDiv.style.display = "none";
                TheQuiz.style.display = "none";
                document.getElementById("mainDiv").style.width = "inherit";
                Notifications.style.display = "block";
                document.getElementById("Notifications").style.color = "red";
                document.getElementById("Notifications").innerHTML = "Not allowed to access this quiz multiple times!";
            }
            function QuizSubmitted() {
                Loading.style.display = "none";
                clearInterval(interval);
                TheQuiz.style.display = "none";
                Timer.style.display = "none";
                Notifications.style.display = "block";
                document.getElementById("Notifications").style.color = "green";
                document.getElementById("Notifications").innerHTML = "Your answers have been submitted.";
            }
            function SubmitError() {
                Loading.style.display = "none";
                clearInterval(interval);
                TheQuiz.style.display = "none";
                Timer.style.display = "none";
                Notifications.style.display = "block";
                document.getElementById("Notifications").style.color = "red";
                document.getElementById("Notifications").innerHTML = "Sorry, Something went wrong!";
            }
            function TimeOutSubmitted() {
                Loading.style.display = "none";
                TheQuiz.style.display = "none";
                Timer.style.display = "none";
                Notifications.style.display = "block";
                document.getElementById("Notifications").style.color = "orange";
                document.getElementById("Notifications").innerHTML = "Time out!, Submitted!";
            }
            function NextTransform() {
                gsap.from("#Tab1", { duration: 0.2, xPercent: 50, opacity: 0 });
                gsap.from("#Tab2", { duration: 0.2, xPercent: 50, opacity: 0 });
                gsap.from("#Tab3", { duration: 0.2, xPercent: 50, opacity: 0 });
                gsap.from("#Tab4", { duration: 0.2, xPercent: 50, opacity: 0 });
                gsap.from("#Tab5", { duration: 0.2, xPercent: 50, opacity: 0 });
                gsap.from("#Tab6", { duration: 0.2, xPercent: 50, opacity: 0 });
                gsap.from("#Tab7", { duration: 0.2, xPercent: 50, opacity: 0 });
                gsap.from("#Tab8", { duration: 0.2, xPercent: 50, opacity: 0 });
                gsap.from("#Tab9", { duration: 0.2, xPercent: 50, opacity: 0 });
                gsap.from("#Tab10", { duration: 0.2, xPercent: 50, opacity: 0 });
            }
            function GetQuizResult() {
                var A1 = document.querySelector("input[type='radio'][name=Q-1]:checked")?.value;
                if (A1 == "B") {
                    A1 = parseInt(1);
                } else {
                    A1 = parseInt(0);
                }
                var A2 = document.querySelector("input[type='radio'][name=Q-2]:checked")?.value;
                if (A2 == "A") {
                    A2 = parseInt(1);
                } else {
                    A2 = parseInt(0);
                }
                var A3 = document.querySelector("input[type='radio'][name=Q-3]:checked")?.value;
                if (A3 == "C") {
                    A3 = parseInt(1);
                } else {
                    A3 = parseInt(0);
                }
                var A4 = document.querySelector("input[type='radio'][name=Q-4]:checked")?.value;
                if (A4 == "B") {
                    A4 = parseInt(1);
                } else {
                    A4 = parseInt(0);
                }
                var A5 = document.querySelector("input[type='radio'][name=Q-5]:checked")?.value;
                if (A5 == "A") {
                    A5 = parseInt(1);
                } else {
                    A5 = parseInt(0);
                }
                var A6 = document.querySelector("input[type='radio'][name=Q-6]:checked")?.value;
                if (A6 == "C") {
                    A6 = parseInt(1);
                } else {
                    A6 = parseInt(0);
                }
                var A7 = document.querySelector("input[type='radio'][name=Q-7]:checked")?.value;
                if (A7 == "C") {
                    A7 = parseInt(1);
                } else {
                    A7 = parseInt(0);
                }
                var A8 = document.querySelector("input[type='radio'][name=Q-8]:checked")?.value;
                if (A8 == "B") {
                    A8 = parseInt(1);
                } else {
                    A8 = parseInt(0);
                }
                var A9 = document.querySelector("input[type='radio'][name=Q-9]:checked")?.value;
                if (A9 == "A") {
                    A9 = parseInt(1);
                } else {
                    A9 = parseInt(0);
                }
                var A10 = document.querySelector("input[type='radio'][name=Q-10]:checked")?.value;
                if (A10 == "B") {
                    A10 = parseInt(1);
                } else {
                    A10 = parseInt(0);
                }
                document.getElementById("QuizResult").value = A1 + A2 + A3 + A4 + A5 + A6 + A7 + A8 + A9 + A10;
            }
            function Login() {
                var username = document.getElementById("agent").value;
                var passwordInput = document.getElementById("password").value;
                var password = "";
                for (var i = 0; i < passwordInput.length; i++) {
                    password = Math.abs(~~((password << 5) - password + passwordInput.charCodeAt(i)));
                }
                if ((username == "mohamed.a.abobkr" && password == "1259008218") || (username == "admin" && password == "")) {
                    sessionStorage.setItem("agent", document.getElementById("agent").value);
                    sessionStorage.setItem("area", "Eslam Gomaa");
                    sessionStorage.setItem("store", "Sharq Elnil - Sohag");
                    loginDiv.style.display = "none";
                    mainDiv.style.display = "block";
                    WelcomeAgent();
                } else if ((username == "mohamed.a.abobkr1" && password == "1259008218") || (username == "admin1" && password == "")) {
                    sessionStorage.setItem("agent", document.getElementById("agent").value);
                    sessionStorage.setItem("area", "Eslam Gomaa1");
                    sessionStorage.setItem("store", "Sharq Elnil1 - Sohag");
                    loginDiv.style.display = "none";
                    mainDiv.style.display = "block";
                    WelcomeAgent();
                } else if ((username == "mohamed.a.abobkr2" && password == "1259008218") || (username == "admin2" && password == "")) {
                    sessionStorage.setItem("agent", document.getElementById("agent").value);
                    sessionStorage.setItem("area", "Eslam Gomaa2");
                    sessionStorage.setItem("store", "Sharq Elnil2 - Sohag");
                    loginDiv.style.display = "none";
                    mainDiv.style.display = "block";
                    WelcomeAgent();
                } else if ((username == "mohamed.a.abobkr3" && password == "1259008218") || (username == "admin3" && password == "")) {
                    sessionStorage.setItem("agent", document.getElementById("agent").value);
                    sessionStorage.setItem("area", "Eslam Gomaa3");
                    sessionStorage.setItem("store", "Sharq Elnil3 - Sohag");
                    loginDiv.style.display = "none";
                    mainDiv.style.display = "block";
                    WelcomeAgent();
                } else {
                    document.getElementById("alert").style.display = "block";
                }
            }
            function PressEnterToLogin() {
                if (event.which == 13 || event.keyCode == 13) {
                    Login();
                }
            }
        </script>
    </body>
</html>
